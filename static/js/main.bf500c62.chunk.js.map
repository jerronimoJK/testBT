{"version":3,"sources":["logo.svg","bluetooth.js","sbrick.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","WebBluetooth","encoder","TextEncoder","decoder","TextDecoder","Object","classCallCheck","this","device","server","_characteristics","Map","_debug","_connected","createClass","key","value","gatt","connected","options","services","_this","navigator","bluetooth","requestDevice","then","_log","name","id","connect","Promise","all","keys","map","serviceId","getPrimaryService","service","characteristics","characteristicId","_cacheCharacteristic","catch","e","_error","_this2","resolve","reject","isConnected","disconnect","characteristicUuid","_this3","characteristic","get","readValue","buffer","DataView","uuid","_this4","writeValue","msg","console","debug","log","_this5","getCharacteristic","set","data","decode","encode","SBrick","CMD_BREAK","CMD_ADC","CMD_ADC_VOLT","PORTS","portId","channelsId","OUTPUT","CLOCKWISE","COUNTERCLOCKWISE","MIN","MAX","sbrick_name","webbluetooth","NAME","PORT0","TOPLEFT","PORT1","BOTTOMLEFT","PORT2","TOPRIGHT","PORT3","BOTTOMRIGHT","CW","CCW","SERVICES","keepalive","ports","power","direction","mode","busy","maxConcurrent","maxQueue","Infinity","queue","Queue","_characteristics2","_this$SERVICES","defineProperty","optionalServices","filters","namePrefix","acceptAllDevices","getFirmwareVersion","version","parseFloat","_keepalive","stopAll","clearInterval","_deviceInfo","portObj","arguments","undefined","_pvm","port","Math","min","max","parseInt","abs","add","writeCharacteristicValue","Uint8Array","portData","_getPortData","_sendPortChangeEvent","portObjs","Array","isArray","array","_getPorts","forEach","push","isNaN","_portsIdle","_setPortsBusy","command","index","toString","returnData","portIds","portsToUpdate","length","concat","stop","_volt","volt","fahrenheit","_temp","temp","sensorSeries","_this6","newPortStatus","drive","channels","_getPortChannels","_adc","arrayData","i","byteLength","getUint16","sensorData","type","voltage","ch0_raw","ch1_raw","typeId","round","uuid_characteristic","_this7","readCharacteristicValue","str","String","fromCharCode","getUint8","_this8","setInterval","getQueueLength","array_channels","_this9","_this10","update_pvm","srt","_delay","getInt16","obj","t","setTimeout","event","CustomEvent","detail","document","body","dispatchEvent","_this11","allAreIdle","status","_this12","App","props","possibleConstructorReturn","getPrototypeOf","call","connectBt","_services","getCharacteristics","ch","disconnectBt","SBRICK1","SBRICK2","getCharacteristic2","start1","val","start2","start3","fs","openFullscreen","robo","delayPromise","time","result","handleOnChange","setState","value1","target","handleOnChangeS1","value2","handleOnChange2","setSbrick1","setSbrick2","state","elem","documentElement","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","inputStyle","transformOorigin","transform","boxShadow","height","width","react_default","a","createElement","className","style","margin","onClick","closeFullscreen","display","justifyContent","onChange","onTouchEnd","onMouseUp","Component","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.bf500c62.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","/*\n * Copyright (c) 2016-17 Francesco Marino\n *\n * @author Francesco Marino <francesco@360fun.net>\n * @website www.360fun.net\n *\n * This is just a basic Class to start playing with the new Web Bluetooth API,\n * specifications can change at any time so keep in mind that all of this is\n * mostly experimental! ;)\n *\n * Check your browser and platform implementation status first\n * https://github.com/WebBluetoothCG/web-bluetooth/blob/gh-pages/implementation-status.md\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nexport const WebBluetooth = (function() {\n\t'use strict';\n\n\t// UTF-8\n\tlet encoder = new TextEncoder('utf-8');\n  let decoder = new TextDecoder('utf-8');\n\n\tclass WebBluetooth {\n\n\t\tconstructor() {\n      this.device           = null;\n      this.server           = null;\n      this._characteristics = new Map();\n\t\t\tthis._debug           = false;\n\t\t\tthis._connected       = false;\n    }\n\n\t\tisConnected() {\n\t\t\treturn this.device && this.device.gatt.connected && this._connected;\n\t\t}\n\n\t\tconnect(options,services) {\n\t\t\treturn navigator.bluetooth.requestDevice(options)\n      .then(device => {\n        this.device = device;\n\t\t\t\tthis._log('Connected to device named \"' + device.name + '\" with ID \"' + device.id + '\"');\n        return device.gatt.connect();\n\t\t\t})\n      .then(server => {\n        this.server = server;\n\t\t\t\treturn Promise.all(\n\t\t\t\t\tObject.keys(services).map( serviceId => {\n\t\t\t\t\t\treturn server.getPrimaryService(serviceId).then(service => {\n\t\t\t\t\t\t\treturn Promise.all(\n\t\t\t\t\t\t\t\tObject.keys(services[serviceId].characteristics).map( characteristicId => {\n\t\t\t\t\t\t\t\t\treturn this._cacheCharacteristic(service, characteristicId)\n\t\t\t\t\t\t\t\t\t.then( () => {\n\t\t\t\t\t\t\t\t\t\tthis._log('Found characteristic \"' + characteristicId + '\"');\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.catch( e => { this._error('Characteristic \"' + characteristicId + '\" NOT found') } );\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t).then( () => {\n\t\t\t\t\t\t\t\treturn this._connected = true;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then( () => {\n\t\t\t\t\t\t\tthis._log('Found service \"' + serviceId + '\"');\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch( e => { this._error('Service \"' + serviceId + '\"') } );\n\t\t\t\t\t})\n\t\t\t\t);\n      });\n    }\n\n\t\tdisconnect() {\n\t\t\treturn new Promise( (resolve, reject) =>  {\n\t\t\t\t\tif( this.isConnected() ) {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject('Device not connected');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then( ()=> {\n\t\t\t\tthis._log('Device disconnected')\n\t\t\t\tthis._connected = false;\n\t\t\t\treturn this.device.gatt.disconnect();\n\t\t\t}).catch( e => { this._error(e) } );\n\t\t}\n\n    readCharacteristicValue(characteristicUuid) {\n\t\t\treturn new Promise( (resolve, reject) =>  {\n\t\t\t\t\tif( this.isConnected() ) {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject('Device not connected');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then( ()=> {\n\t      let characteristic = this._characteristics.get(characteristicUuid);\n\t      return characteristic.readValue()\n\t      .then(value => {\n\t        // In Chrome 50+, a DataView is returned instead of an ArrayBuffer.\n\t        value = value.buffer ? value : new DataView(value);\n\t        this._log('READ', characteristic.uuid, value);\n\t        return value;\n\t      });\n\t\t\t})\n\t\t\t.catch( e => { this._error(e) } );\n    }\n\n\t\twriteCharacteristicValue(characteristicUuid, value) {\n\t\t\treturn new Promise( (resolve, reject) =>  {\n\t\t\t\t\tif( this.isConnected() ) {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject('Device not connected');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then( ()=> {\n\t      let characteristic = this._characteristics.get(characteristicUuid);\n\t      this._log('WRITE', characteristic.uuid, value);\n\t      return characteristic.writeValue(value);\n\t\t\t}).catch( e => { this._error(e) } );\n    }\n\n\t\t_error(msg) {\n\t\t\tif(this._debug) {\n\t\t\t\tconsole.debug(msg);\n\t\t\t} else {\n\t\t\t\tthrow msg;\n\t\t\t}\n\t\t}\n\n\t\t_log(msg) {\n\t\t\tif(this._debug) {\n\t\t\t\tconsole.log(msg);\n\t\t\t}\n\t\t}\n\n\t\t_cacheCharacteristic(service, characteristicUuid) {\n      return service.getCharacteristic(characteristicUuid)\n      .then(characteristic => {\n        this._characteristics.set(characteristicUuid, characteristic);\n      });\n    }\n\n\t\t_decodeString(data) {\n      return decoder.decode(data);\n    }\n    _encodeString(data) {\n      return encoder.encode(data);\n    }\n  }\n\n\treturn WebBluetooth;\n\n})();\n","/*\n * Copyright (c) 2016-17 Francesco Marino\n *\n * @author Francesco Marino <francesco@360fun.net>\n * @website www.360fun.net\n *\n * Requires bluetooth.js and promise-queue library\n * https://github.com/360fun/bluetooth.js\n * https://github.com/azproduction/promise-queue\n *\n * This code is compatible with SBrick Protocol 4.17\n * https://social.sbrick.com/wiki/view/pageId/11/slug/the-sbrick-ble-protocol\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { WebBluetooth } from './bluetooth'\nimport Queue from 'promise-queue';\nexport const SBrick = (function()  {\n\t'use strict';\n\n\tconst ID_SBRICK                             = \"SBrick\";\n\tconst FIRMWARE_COMPATIBILITY                 = 4.17;\n\n\tconst UUID_SERVICE_DEVICEINFORMATION        = \"device_information\";\n\tconst UUID_CHARACTERISTIC_MODELNUMBER       = \"model_number_string\";\n\tconst UUID_CHARACTERISTIC_FIRMWAREREVISION  = \"firmware_revision_string\";\n\tconst UUID_CHARACTERISTIC_HARDWAREREVISION  = \"hardware_revision_string\";\n\tconst UUID_CHARACTERISTIC_SOFTWAREREVISION  = \"software_revision_string\";\n\tconst UUID_CHARACTERISTIC_MANUFACTURERNAME  = \"manufacturer_name_string\";\n\n\tconst UUID_SERVICE_REMOTECONTROL            = \"4dc591b0-857c-41de-b5f1-15abda665b0c\";\n\tconst UUID_CHARACTERISTIC_REMOTECONTROL     = \"02b8cbcc-0e25-4bda-8790-a15f53e6010f\";\n\tconst UUID_CHARACTERISTIC_QUICKDRIVE        = \"489a6ae0-c1ab-4c9c-bdb2-11d373c1b7fb\";\n\n\tconst UUID_SERVICE_OTA                      = \"1d14d6ee-fd63-4fa1-bfa4-8f47b42119f0\";\n\tconst UUID_CHARACTERISTIC_OTACONTROL        = \"f7bf3564-fb6d-4e53-88a4-5e37e0326063\";\n\n\t// REMOTE CONTROL COMMANDS\n\n\t// Exceptions\n\tconst ERROR_LENGTH  = 0x80; // Invalid command length\n\tconst ERROR_PARAM   = 0x81; // Invalid parameter\n\tconst ERROR_COMMAND = 0x82; // No such command\n\tconst ERROR_NOAUTH  = 0x83; // No authentication needed\n\tconst ERROR_AUTH    = 0x84; // Authentication error\n\tconst ERROR_DOAUTH  = 0x85; // Authentication needed\n\tconst ERROR_AUTHOR  = 0x86; // Authorization error\n\tconst ERROR_THERMAL = 0x87; // Thermal protection is active\n\tconst ERROR_STATE   = 0x88; // The system is in a state where the command does not make sense\n\n\t// Commands\n\tconst CMD_BREAK     = 0x00; // Stop command\n\tconst CMD_DRIVE     = 0x01; // Drive command\n\tconst CMD_ADC       = 0x0F; // Query ADC\n\tconst CMD_ADC_VOLT  = 0x08; // Get Voltage\n\tconst CMD_ADC_TEMP  = 0x09; // Get Temperature\n\tconst CMD_PVM       = 0x2C; // Periodic Voltage Measurements\n\n\t// SBrick Ports / Channels\n\tconst PORTS = [\n\t\t{ portId: 0x00, channelsId: [ 0x00, 0x01 ]},\n\t\t{ portId: 0x01, channelsId: [ 0x02, 0x03 ]},\n\t\t{ portId: 0x02, channelsId: [ 0x04, 0x05 ]},\n\t\t{ portId: 0x03, channelsId: [ 0x06, 0x07 ]}\n\t];\n\n\t// Port Mode\n\tconst INPUT  = 'input';\n\tconst OUTPUT = 'output';\n\tconst BREAK  = 'break';\n\n\t// Direction\n\tconst CLOCKWISE        = 0x00; // Clockwise\n\tconst COUNTERCLOCKWISE = 0x01; // Counterclockwise\n\n\t// Values limits\n\tconst MIN      = 0;   // No Speed\n\tconst MAX      = 255; // Max Speed\n\tconst MAX_QD   = 127; // Max Speed for QuickDrive\n\tconst MAX_VOLT = 9;   // Max Voltage = Full battery\n\n\t// Times in milliseconds\n\tconst T_KA  = 300; // Time interval for the keepalive loop (must be < 500ms - watchdog default)\n\tconst T_PVM = 500; // Time delay for PVM completion: the registry is update approximately 5 times per second (must be > 200ms)\n\n\t// Sbrick class definition\n\tclass SBrick {\n\n\t\t// CONSTRUCTOR\n\n\t\t/**\n\t\t* Create a new instance of the SBrick class (and accordingly also WebBluetooth)\n\t\t* @param {string} sbrick_name - The name of the sbrick\n\t\t*/\n\t\tconstructor( sbrick_name ) {\n\t\t\tthis.webbluetooth = new WebBluetooth();\n\n\t\t\t// export constants\n\t\t\tthis.NAME     = sbrick_name || \"\";\n\t\t\tthis.PORT0    = this.TOPLEFT     = PORTS[0].portId;\n\t\t\tthis.PORT1    = this.BOTTOMLEFT  = PORTS[1].portId;\n\t\t\tthis.PORT2    = this.TOPRIGHT    = PORTS[2].portId;\n\t\t\tthis.PORT3    = this.BOTTOMRIGHT = PORTS[3].portId;\n\t\t\tthis.CW       = CLOCKWISE;\n\t\t\tthis.CCW      = COUNTERCLOCKWISE;\n\t\t\tthis.MAX      = MAX;\n\t\t\tthis.SERVICES = {}\n\n\t\t\t// status\n\t\t\tthis.keepalive = null;\n\t\t\tthis.ports     = [\n\t\t\t\t{ power: MIN, direction: CLOCKWISE, mode: OUTPUT, busy: false },\n\t\t\t\t{ power: MIN, direction: CLOCKWISE, mode: OUTPUT, busy: false },\n\t\t\t\t{ power: MIN, direction: CLOCKWISE, mode: OUTPUT, busy: false },\n\t\t\t\t{ power: MIN, direction: CLOCKWISE, mode: OUTPUT, busy: false }\n\t\t\t];\n\n\t\t\t// queue\n\t\t\tthis.maxConcurrent = 1;\n\t\t\tthis.maxQueue      = Infinity;\n\t\t\tthis.queue         = new Queue( this.maxConcurrent, this.maxQueue );\n\n\t\t\t// debug\n\t\t\tthis._debug         = false;\n\t\t}\n\n\n\t\t// PUBLIC FUNCTIONS\n\n\t\t/**\n\t\t* Open the Web Bluetooth popup to search and connect the SBrick (filtered by name if previously specified)\n\t\t* @returns {promise returning undefined}\n\t\t*/\n\t\tconnect() {\n\t\t\tthis.SERVICES = {\n\t\t\t\t[UUID_SERVICE_DEVICEINFORMATION] : {\n\t\t\t\t\tname : \"Device Information\",\n\t\t\t\t\tcharacteristics : {\n\t\t\t\t\t\t[UUID_CHARACTERISTIC_MODELNUMBER] : {\n\t\t\t\t\t\t\tname : \"Model Number String\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[UUID_CHARACTERISTIC_FIRMWAREREVISION] : {\n\t\t\t\t\t\t\tname : \"Firmware Revision String\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[UUID_CHARACTERISTIC_HARDWAREREVISION] : {\n\t\t\t\t\t\t\tname : \"Hardware Revision String\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[UUID_CHARACTERISTIC_SOFTWAREREVISION] : {\n\t\t\t\t\t\t\tname : \"Software Revision String\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[UUID_CHARACTERISTIC_MANUFACTURERNAME] : {\n\t\t\t\t\t\t\tname : \"Manufacturer Name String\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t[UUID_SERVICE_REMOTECONTROL] : {\n\t\t\t\t\tname : \"Remote Control\",\n\t\t\t\t\tcharacteristics : {\n\t\t\t\t\t\t[UUID_CHARACTERISTIC_REMOTECONTROL] : {\n\t\t\t\t\t\t\tname : \"Quick Drive\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[UUID_CHARACTERISTIC_QUICKDRIVE] : {\n\t\t\t\t\t\t\tname : \"Remote Control\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet options = {\n\t\t\t\t// filter by service should work but it doesn't show any SBrick...\n\t\t\t\t// filters: [{\n\t\t\t\t// \tservices: [ UUID_SERVICE_DEVICEINFORMATION, UUID_SERVICE_OTA, UUID_SERVICE_REMOTECONTROL ]\n\t\t\t\t// }],\n\t\t\t\toptionalServices: Object.keys(this.SERVICES)\n\t\t\t};\n\n\t\t\t// if the SBrick name is not defined it shows all the devices\n\t\t\t// I don't like this solution, would be better to filter \"by services\"\n\t\t\tif( this.NAME != \"\" ) {\n\t\t\t\toptions.filters = [{\n\t\t\t\t\tnamePrefix: [ this.NAME ]\n\t\t\t\t}];\n\t\t\t} else {\n\t\t\t\toptions.acceptAllDevices = true;\n\t\t\t}\n\t\t\treturn this.webbluetooth.connect(options,this.SERVICES)\n\t\t\t.then( () => {\n\t\t\t\tif( this.isConnected() ) {\n\t\t\t\t\tif( this._debug ) {\n\t\t\t\t\t\tthis._log( \"Connected to SBrick \" + this.webbluetooth.device.id );\n\t\t\t\t\t}\n\t\t\t\t\t// Firmware Compatibility Check\n\t\t\t\t\tthis.getFirmwareVersion()\n\t\t\t\t\t.then( version => {\n\t\t\t\t\t\t// version = FIRMWARE_COMPATIBILITY;\n\t\t\t\t\t\tif( parseFloat(version) >= FIRMWARE_COMPATIBILITY ) {\n\t\t\t\t\t\t\tthis.keepalive = this._keepalive(this);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._error(\"Firmware not compatible: please update your SBrick.\");\n\t\t\t\t\t\t\tthis.disconnect();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch( e => { this._error(e) } );\n\t\t}\n\n\t\t/**\n\t\t* Disconnect the SBrick\n\t\t* @returns {promise returning undefined}\n\t\t*/\n\t\tdisconnect() {\n\t\t\treturn new Promise( (resolve, reject) => {\n\t\t\t\tif( this.isConnected() ) {\n\t\t\t\t\tresolve();\n\t\t\t\t} else {\n\t\t\t\t\treject('Not connected');\n\t\t\t\t}\n\t\t\t} ).then( ()=> {\n\t\t\t\treturn this.stopAll()\n\t\t\t\t.then( ()=> {\n\t\t\t\t\tclearInterval( this.keepalive );\n\t\t\t\t\treturn this.webbluetooth.disconnect();\n\t\t\t\t} );\n\t\t\t} )\n\t\t\t.catch( e => { this._error(e) } );\n\t\t}\n\n\n\t\t/**\n\t\t* Check if the SBrick is connected to the browser\n\t\t* @returns {boolean}\n\t\t*/\n\t\tisConnected() {\n\t\t\treturn this.webbluetooth && this.webbluetooth.isConnected();\n\t\t}\n\n\t\t/**\n\t\t* Get the SBrick's model number\n\t\t* @returns {promise returning string}\n\t\t*/\n\t\tgetModelNumber() {\n\t\t\treturn this._deviceInfo(UUID_CHARACTERISTIC_MODELNUMBER);\n\t\t}\n\n\t\t/**\n\t\t* Get the SBrick's firmware version\n\t\t* @returns {promise returning string}\n\t\t*/\n\t\tgetFirmwareVersion() {\n\t\t\treturn this._deviceInfo(UUID_CHARACTERISTIC_FIRMWAREREVISION);\n\t\t}\n\n\t\t/**\n\t\t* Get the SBrick's hardware version\n\t\t* @returns {promise returning string}\n\t\t*/\n\t\tgetHardwareVersion() {\n\t\t\treturn this._deviceInfo(UUID_CHARACTERISTIC_HARDWAREREVISION);\n\t\t}\n\n\t\t/**\n\t\t* Get the SBrick's software version\n\t\t* @returns {promise returning string}\n\t\t*/\n\t\tgetSoftwareVersion() {\n\t\t\treturn this._deviceInfo(UUID_CHARACTERISTIC_SOFTWAREREVISION);\n\t\t}\n\n\t\t/**\n\t\t* Get the SBrick's manufacturer's name\n\t\t* @returns {promise returning string}\n\t\t*/\n\t\tgetManufacturerName() {\n\t\t\treturn this._deviceInfo(UUID_CHARACTERISTIC_MANUFACTURERNAME);\n\t\t}\n\n\n\t\t/**\n\t\t* Send drive command\n\t\t* @param {object} portObj - {portId, direction, power}\n\t\t*\t\tportId: {number} The index (0-3) of the port to update in the this.ports array\n\t\t*\t\tdirection: {hexadecimal number} The drive direction (0x00, 0x01 - you can use the constants SBrick.CLOCKWISE and SBrick.COUNTERCLOCKWISE)\n\t\t*\t\tpower: {number} - The power level for the drive command 0-255\n\t\t* @returns {promise returning object} - Returned object: portId, direction, power\n\t\t*/\n\t\tdrive( portObj ) {\n\t\t\tif (typeof portObj !== 'object') {\n\t\t\t\t// the old version with 3 params was used\n\t\t\t\tportObj = {\n\t\t\t\t\tportId: \t  arguments[0],\n\t\t\t\t\tdirection: \targuments[1],\n\t\t\t\t\tpower: \t\t  arguments[2]\n\t\t\t\t};\n\t\t\t\tthis._log('Calling drive with 3 arguments is deprecated: use 1 object {portId, direction, power} instead.');\n\t\t\t}\n\n\t\t\tconst portId \t\t= portObj.portId,\n\t\t\t\t\t\tdirection = portObj.direction || CLOCKWISE,\n\t\t\t\t\t\tpower \t\t= ( portObj.power === undefined ) ? MAX : portObj.power\n\n\t\t\treturn new Promise( (resolve, reject) => {\n\t\t\t\tif( portId !== undefined && direction !== undefined && power !== undefined ) {\n\t\t\t\t\tresolve();\n\t\t\t\t} else {\n\t\t\t\t\tlet msg = 'Wrong input: please specify ';\n\t\t\t\t\tif (portId === undefined) { msg += 'portId'; }\n\t\t\t\t\tif (power === undefined) {\n\t\t\t\t\t\tif (portId === undefined) {\tmsg += ' and'; }\n\t\t\t\t\t\tmsg += ' power';\n\t\t\t\t\t}\n\t\t\t\t\treject(msg);\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.then( ()=> {\n\t\t\t\treturn this._pvm( { portId:portId, mode:OUTPUT } );\n\t\t\t})\n\t\t\t.then( () => {\n\t\t\t\tlet port = this.ports[portId];\n\n\t\t\t\tport.power     = Math.min(Math.max(parseInt(Math.abs(power)), MIN), MAX);\n\t\t\t\tport.direction = direction ? COUNTERCLOCKWISE : CLOCKWISE;\n\n\t\t\t\tif( !port.busy ) {\n\t\t\t\t\tport.busy = true;\n\t\t\t\t\tthis.queue.add( () => {\n\t\t\t\t\t\tport.busy = false;\n\t\t\t\t\t\treturn this.webbluetooth.writeCharacteristicValue(\n\t\t\t\t\t\t\tUUID_CHARACTERISTIC_REMOTECONTROL,\n\t\t\t\t\t\t\tnew Uint8Array([ CMD_DRIVE, PORTS[portId].portId, port.direction, port.power ])\n\t\t\t\t\t\t) }\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then( () => {\n\t\t\t\t// all went well, send event and return the settings we just applied\n\t\t\t\tlet portData = this._getPortData(portId);\n\t\t\t\tthis._sendPortChangeEvent(portData);\n\t\t\t\t// return the new settings to the promise\n\t\t\t\treturn portData;\n\t\t\t})\n\t\t\t.catch( e => { this._error(e) } );\n\t\t}\n\n\n\t\t/**\n\t\t* Send quickDrive command\n\t\t* @param {array} portObjs - An array with a setting objects {port, direction, power} for every port you want to update\n\t\t* @returns {promise returning array} - Returned array: [{portId, direction, power}, {...}, {...}, {...}]\n\t\t*/\n\t\tquickDrive( portObjs ) {\n\t\t\treturn new Promise( (resolve, reject) => {\n\t\t\t\tif( Array.isArray(portObjs) ) {\n\t\t\t\t\tresolve();\n\t\t\t\t} else {\n\t\t\t\t\treject('Wrong input: quickDrive expects array');\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.then( ()=> {\n\t\t\t\tlet array = [];\n\t\t\t\tlet allPorts = this._getPorts();\n\t\t\t\tallPorts.forEach( (portId) => {\n\t\t\t\t\tarray.push( {\n\t\t\t\t\t\tportId: portId,\n\t\t\t\t\t\tmode: OUTPUT\n\t\t\t\t\t} );\n\t\t\t\t});\n\t\t\t\tconsole.log(array);\n\t\t\t\treturn this._pvm( array );\n\t\t\t})\n\t\t\t.then( ()=> {\n\t\t\t\t// updating ports status\n\t\t\t\tportObjs.forEach( (portObj) => {\n\t\t      let portId = parseInt( portObj.portId );\n\t\t      if (isNaN(portId)) {\n\t\t        // the old version with port instead of portId was used\n\t\t        portId = parseInt( portObj.port );\n\t\t        this._log('object property port is deprecated. use portId instead.');\n\t\t      }\n\t\t      let port       = this.ports[portId];\n\t\t      port.power     = Math.min(Math.max(parseInt(Math.abs(portObj.power)), MIN), MAX);\n\t\t      port.direction = portObj.direction ? COUNTERCLOCKWISE : CLOCKWISE;\n\t\t    });\n\t\t\t\t// send command\n\t\t\t\tif(this._portsIdle(this._getPorts())) {\n\t\t\t\t\t// set all ports busy\n\t\t      this._setPortsBusy(this._getPorts(), true);\n\t\t\t\t\tthis.queue.add( () => {\n\t\t\t\t\t\tlet command = [];\n\t\t\t\t\t\tthis.ports.forEach( (port, index) => {\n\t\t\t\t\t\t\t\tport.busy = false;\n\t\t\t\t\t\t\t\tcommand.push( parseInt( parseInt(port.power/MAX*MAX_QD).toString(2) + port.direction, 2 ) );\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn this.webbluetooth.writeCharacteristicValue(\n\t\t\t\t\t\t\tUUID_CHARACTERISTIC_QUICKDRIVE,\n\t\t\t\t\t\t\tnew Uint8Array( command )\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then( () => {\n\t\t\t\t// all went well, return an array with the channels and the settings we just applied\n\t\t\t\tlet returnData = [];\n\n\t\t\t\tportObjs.forEach((portObj) => {\n\t\t\t\t\tlet portId = portObj.portId;\n\t\t\t\t\tif (portObj.port) {\n\t\t\t\t\t\t// it uses the old syntax\n\t\t\t\t\t\tportId = parseInt( portObj.port );\n\t\t\t\t\t}\n\n\t\t\t\t\t//send event for this port\n\t\t\t\t\tlet portData = this._getPortData(portId);\n\t\t\t\t\tthis._sendPortChangeEvent(portData);\n\t\t\t\t\treturnData.push(portData);\n\t\t\t\t});\n\t\t\t\treturn returnData;\n\t\t\t})\n\t\t\t.catch( e => { this._error(e) } );\n\t\t}\n\n\n\t\t/**\n\t\t* Stop a port\n\t\t* @param {number | array} portIds - The number or array of numbers of channels to stop\n\t\t* @returns {promise}\n\t\t*/\n\t\tstop( portIds ) {\n\t\t\treturn new Promise( (resolve, reject) => {\n\t\t\t\tif( portIds!==null ) {\n\t\t\t\t\tif( !Array.isArray(portIds) ) {\n\t\t\t\t\t\tportIds = [ portIds ];\n\t\t\t\t\t}\n\t\t\t\t\tresolve();\n\t\t\t\t} else {\n\t\t\t\t\treject('wrong input');\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.then( ()=> {\n\t\t\t\tlet array = [];\n\t\t\t\tportIds.forEach( (portId) => {\n\t\t\t\t\tarray.push( {\n\t\t\t\t\t\tportId: portId,\n\t\t\t\t\t\tmode: BREAK\n\t\t\t\t\t} );\n\t\t\t\t});\n\t\t\t\treturn this._pvm( array );\n\t\t\t})\n\t\t\t.then( ()=> {\n\t\t\t\tlet portsToUpdate = [];\n\t\t\t\t// update object values and build the command\n\t\t\t\tportIds.forEach( (portId) => {\n\t\t\t\t\tlet port = this.ports[portId];\n\t\t\t\t\tport.power = 0;\n\t\t\t\t\tif(!port.busy) {\n\t\t\t\t\t\tportsToUpdate.push(portId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif( portsToUpdate.length ) {\n\t\t\t\t\tthis._setPortsBusy(portsToUpdate, true);\n\t\t\t\t\tthis.queue.add( () => {\n\t\t\t\t\t\tthis._setPortsBusy(portsToUpdate, false);\n\t\t\t\t\t\treturn this.webbluetooth.writeCharacteristicValue(\n\t\t\t\t\t\t\tUUID_CHARACTERISTIC_REMOTECONTROL,\n\t\t\t\t\t\t\tnew Uint8Array( [ CMD_BREAK ].concat(portsToUpdate) )\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then( () => {\n\t\t\t\t// all went well, return an array with the channels and the settings we just applied\n\t\t\t\tlet returnData = [];\n\t\t\t\tportIds.forEach((portId) => {\n\t\t\t\t\t// send event for this port\n\t\t\t\t\tlet portData = this._getPortData(portId);\n\t\t\t\t\tthis._sendPortChangeEvent(portData);\n\t\t\t\t\treturnData.push(portData);\n\t\t\t\t});\n\t\t\t\treturn returnData;\n\t\t\t})\n\t\t\t.catch( e => { this._error(e) } );\n\t\t}\n\n\n\t\t/**\n\t\t* Stop all ports\n\t\t* @returns {promise}\n\t\t*/\n\t\tstopAll() {\n\t\t\treturn this.stop( this._getPorts() );\n\t\t}\n\n\n\t\t/**\n\t\t* Get battery percentage\n\t\t* @returns {promise returning number}\n\t\t*/\n\t\tgetBattery() {\n\t\t\treturn this._volt()\n\t\t\t.then( volt => {\n\t\t\t\treturn parseInt( Math.abs( volt / MAX_VOLT * 100 ) );\n\t\t\t});\n\t\t}\n\n\n\t\t/**\n\t\t* Get sbrick's temperature in degrees Celsius (default) or Fahrenheit\n\t\t* @param {boolean} fahrenheit - If true, temperature is returned in Fahrenheit\n\t\t* @returns {promise returning number}\n\t\t*/\n\t\tgetTemp( fahrenheit = false) {\n\t\t\treturn this._temp()\n\t\t\t.then( temp => {\n\t\t\t\tlet result = 0;\n\t\t\t\tif( fahrenheit ) {\n\t\t\t\t\tresult = temp * 9/5 + 32;\n\t\t\t\t\tresult = result; // ' °F';\n\t\t\t\t} else {\n\t\t\t\t\tresult = temp; // ' °C';\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t* Read sensor data on a specific PORT\n\t\t* @param {hexadecimal} portId - The index of the port in the this.ports array\n\t\t* @param {string} sensorSeries - not implemented yet - in the future it will manage different sensor series (wedo, EV3, NXT, ...)\n\t\t* @returns {promise} - sensor measurement Object (structure depends on the sensor type)\n\t\t*/\n\t\tgetSensor( portId, sensorSeries ) {\n\t\t\treturn new Promise( (resolve, reject) => {\n\t\t\t\tif( portId !== null ) {\n\t\t\t\t\tresolve();\n\t\t\t\t} else {\n\t\t\t\t\treject('wrong input');\n\t\t\t\t}\n\t\t\t}).then( () => {\n\t\t\t\tlet newPortStatus = { portId: portId, mode:INPUT };\n\t\t\t\t// reset the port if is in \"break mode\" (short circuited) or driving before activate PVM\n\t\t\t\tif(this.ports[portId].mode===BREAK || this.ports[portId].power!=0) {\n\t\t\t\t\treturn this.drive(portId,CLOCKWISE,0)\n\t\t\t\t\t.then( () => {\n\t\t\t\t\t\treturn this._pvm( newPortStatus );\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\treturn this._pvm( newPortStatus );\n\t\t\t\t}\n\t\t\t}).then( () => {\n\t\t\t\tlet channels = this._getPortChannels(portId);\n\t\t\t\treturn this._adc([CMD_ADC_VOLT].concat(channels))\n\t\t\t\t.then( data => {\n\t\t\t\t\tlet arrayData = [];\n\t\t\t\t\tfor (let i = 0; i < data.byteLength; i+=2) {\n\t\t\t\t\t\tarrayData.push( data.getUint16(i, true) );\n\t\t\t\t\t}\n\t\t\t\t\tlet sensorData = {\n\t\t\t\t\t\ttype: 'unknown',\n\t\t\t\t\t\tvoltage: arrayData[0] >> 4,\n\t\t\t\t\t\tch0_raw: arrayData[1] >> 4,\n\t\t\t\t\t\tch1_raw: arrayData[2] >> 4\n\t\t\t\t\t};\n\n\t\t\t\t\t// Sensor Type Management\n\t\t\t\t\tswitch(sensorSeries) {\n\t\t\t\t\t\tcase \"wedo\":\n\t\t\t\t\t\t\tlet typeId  = Math.round( ( sensorData.ch0_raw / sensorData.voltage ) * 255 );\n\t\t\t\t\t\t\tlet value = Math.round( ( sensorData.ch1_raw / sensorData.voltage ) * 255 );\n\t\t\t\t\t\t\tsensorData.type  = ( typeId >= 48 && typeId <= 50 ) ? \"tilt\" : \"motion\";\n\t\t\t\t\t\t\tsensorData.value = value;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tsensorData.value = sensorData.ch1_raw / sensorData.voltage;\n\t\t\t\t\t}\n\t\t\t\t\treturn sensorData;\n\t\t\t\t} );\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t* Helper function to invert CW in CCW and vice versa\n\t\t* @param {hex number} direction\n\t\t*/\n\t\tinvDir( direction ) {\n\t\t\treturn direction ? CLOCKWISE : COUNTERCLOCKWISE;\n\t\t}\n\n\n\t\t// PRIVATE FUNCTIONS\n\n\t\t/**\n\t\t* Read some common Blutooth devices informations about the SBrick\n\t\t* @param {hexadecimal|string} uuid_characteristic\n\t\t* @returns {promise}\n\t\t*/\n\t\t_deviceInfo( uuid_characteristic ) {\n\t\t\treturn new Promise( (resolve, reject) => {\n\t\t\t\tif( typeof this.SERVICES[UUID_SERVICE_DEVICEINFORMATION].characteristics[uuid_characteristic] != 'undefined' ) {\n\t\t\t\t\tresolve();\n\t\t\t\t} else {\n\t\t\t\t\treject('Wrong input');\n\t\t\t\t}\n\t\t\t} ).then( () => {\n\t\t\t\treturn this.webbluetooth.readCharacteristicValue( uuid_characteristic )\n\t\t\t\t.then(data => {\n\t\t\t\t\tlet str = \"\";\n\t\t\t\t\tfor (let i = 0 ; i < data.byteLength ; i++) {\n\t\t\t\t\t\tstr += String.fromCharCode(data.getUint8(i));\n\t\t\t\t\t}\n\t\t\t\t\treturn str;\n\t\t\t\t})\n\t\t\t\t.catch( e => { this._error(e) } );\n\t\t\t})\n\t\t\t.catch( e => { this._error(e) } );\n\t\t}\n\n\t\t/**\n\t\t* Keep the connection alive, preventing the SBrick internal watchdog (500 millisec by default) to close it\n\t\t*/\n\t\t_keepalive() {\n\t\t\treturn setInterval( () => {\n\t\t\t\tif( !this.isConnected() ) {\n\t\t\t\t\tthis._log('Connection lost');\n\t\t\t\t\tclearInterval( this.keepalive );\n\t\t\t\t} else if( this.queue.getQueueLength() === 0 ) {\n\t\t\t\t\tthis.queue.add( () => {\n\t\t\t\t\t\treturn this.webbluetooth.writeCharacteristicValue(\n\t\t\t\t\t\t\tUUID_CHARACTERISTIC_REMOTECONTROL,\n\t\t\t\t\t\t\tnew Uint8Array( [ CMD_ADC, CMD_ADC_TEMP ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}, T_KA);\n\t\t}\n\n\t\t/**\n\t\t* Read the ADC sensor \"variables\" where each specific channel values are stored\n\t\t* every PORT has 2 channels so use CHANNEL[0-7] to read sensor data\n\t\t* the remaining 2 channels are for the chip TEMPERATURE (0x08) and battery VOLTAGE (0x09)\n\t\t* @param {array} array_channels - an array of channels CHANNEL[0-7], TEMPERATURE or VOLTAGE\n\t\t* @returns {promise} - voltage measurement\n\t\t*/\n\t\t_adc( array_channels ) {\n\t\t\treturn this.queue.add( () => {\n\t\t\t\tlet ports = Array.isArray(array_channels) ? array_channels : [array_channels];\n\t\t\t\treturn this.webbluetooth.writeCharacteristicValue(\n\t\t\t\t\tUUID_CHARACTERISTIC_REMOTECONTROL,\n\t\t\t\t\tnew Uint8Array([CMD_ADC].concat(ports))\n\t\t\t\t).then(() => {\n\t\t\t\t\treturn this.webbluetooth.readCharacteristicValue(UUID_CHARACTERISTIC_REMOTECONTROL)\n\t\t\t\t\t.then(data => {\n\t\t\t\t\t\treturn data;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t* Enable \"Power Voltage Measurements\" (five times a second) on a specific PORT (on both CHANNELS)\n\t\t* the values are stored in internal SBrick variables, to read them use _adc()\n\t\t* @param {array} portObjs - an array of port status objects { portId, mode: INPUT-OUTPUT}\n\t\t* @returns {promise} - undefined\n\t\t*/\n\t\t_pvm( portObjs ) {\n\t\t\treturn new Promise( (resolve, reject) => {\n\t\t\t\tif( portObjs !== null ) {\n\t\t\t\t\tresolve();\n\t\t\t\t} else {\n\t\t\t\t\treject('wrong input');\n\t\t\t\t}\n\t\t\t} ).then( ()=> {\n\t\t\t\tif( !Array.isArray(portObjs) ) {\n\t\t\t\t\tportObjs = [ portObjs ];\n\t\t\t\t}\n\t\t\t\tlet update_pvm = false;\n\t\t\t\tportObjs.forEach( (portObj) => {\n\t\t\t\t\tlet portId = portObj.portId;\n\t\t\t\t\tlet mode = portObj.mode;\n\t\t\t\t\tif( this.ports[portId].mode != mode ) {\n\t\t\t\t\t\tthis.ports[portId].mode = mode;\n\t\t\t\t\t\tupdate_pvm = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif(update_pvm) {\n\t\t\t\t\tlet command = [CMD_PVM];\n\t\t\t\t\tlet srt = \"\";\n\t\t\t\t\tthis.ports.forEach( (port, i) => {\n\t\t\t\t\t\tif(port.mode==INPUT) {\n\t\t\t\t\t\t\tlet channels = this._getPortChannels(i);\n\t\t\t\t\t\t\tcommand.push(channels[0]);\n\t\t\t\t\t\t\tcommand.push(channels[1]);\n\t\t\t\t\t\t\tsrt += \" PORT\"+ i + \" (CH\" + channels[0] + \" CH\" + channels[1]+\")\";\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.queue.add( () => {\n\t\t\t\t\t\treturn this.webbluetooth.writeCharacteristicValue(\n\t\t\t\t\t\t\tUUID_CHARACTERISTIC_REMOTECONTROL,\n\t\t\t\t\t\t\tnew Uint8Array(command)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.then( () => {\n\t\t\t\t\t\t\tthis._log( \"PVM set\" + ( srt==\"\" ? \" OFF\" : srt ) );\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\t// PVM has a delay before start to collect actual data\n\t\t\t\t\treturn this._delay(T_PVM);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\n\n\t\t/**\n\t\t* Get the SBrick battery voltage\n\t\t* @returns {number} - voltage in Volts\n\t\t*/\n\t\t_volt() {\n\t\t\treturn this._adc(CMD_ADC_VOLT).then( data => {\n\t\t\t\tlet volt = data.getInt16( 0, true );\n\t\t\t\treturn parseFloat( volt * 0.83875 / 2047.0 ); // V;\n\t\t\t} );\n\t\t}\n\n\t\t/**\n\t\t* Get the SBrick internal temperature\n\t\t* @returns {number} - temperature in Celsius\n\t\t*/\n\t\t_temp() {\n\t\t\treturn this._adc(CMD_ADC_TEMP).then( data => {\n\t\t\t\tlet temp = data.getInt16( 0, true );\n\t\t\t\treturn parseFloat(temp / 118.85795 - 160); // °C;\n\t\t\t} );\n\t\t}\n\n\t\t/**\n\t\t* Helper function to get ports Ids\n\t\t* @returns {boolean}\n\t\t*/\n\t\t_getPorts() {\n\t\t\treturn PORTS.map( function(obj) {return obj.portId;} );\n\t\t}\n\n\t\t/**\n\t\t* Helper function to find a port channel numbers\n\t\t* @param {number} portId - The index of the port in the this.ports array\n\t\t* @returns {array} - hexadecimal numbers of both channels\n\t\t*/\n\t\t_getPortChannels( portId ) {\n\t\t\treturn PORTS[portId].channelsId;\n\t\t}\n\n\t\t/**\n\t\t* Get the settings of a specific port\n\t\t* @returns {object} portId, direction, power\n\t\t*/\n\t\t_getPortData(portId) {\n\t\t\tconst port = this.ports[portId],\n\t\t\t\tdata = {\n\t\t\t\t\tportId:    portId,\n\t\t\t\t\tdirection: port.direction,\n\t\t\t\t\tpower:     port.power,\n\t\t\t\t\tmode:      port.mode\n\t\t\t\t};\n\t\t\treturn data;\n\t\t}\n\n\t\t/**\n\t\t* Error management\n\t\t* @param {string} msg - message to print or throw\n\t\t*/\n\t\t_error( msg ) {\n\t\t\tif(this._debug) {\n\t\t\t\tconsole.debug(msg);\n\t\t\t} else {\n\t\t\t\tthrow msg;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t* Log\n\t\t* @param {string} msg - message to print\n\t\t*/\n\t\t_log( msg ) {\n\t\t\tif(this._debug) {\n\t\t\t\tconsole.log(msg);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t* Delay promise\n\t\t* @param {number} t - time in milliseconds\n\t\t*/\n\t\t_delay(t) {\n\t\t\treturn new Promise(function(resolve) {\n\t\t \t\tsetTimeout(resolve, t)\n\t\t \t});\n\t\t}\n\n\t\t/**\n\t\t* Trigger event on body to notify listeners that a port's values have changed\n\t\t* @param {object} portData - The data ({portId, power, direction}) for the port that was changed\n\t\t* @returns {undefined}\n\t\t*/\n\t\t_sendPortChangeEvent( portData ) {\n\t\t\tconst event = new CustomEvent('portchange.sbrick', {detail: portData});\n\t\t\tdocument.body.dispatchEvent(event);\n\t\t}\n\n\t\t/**\n\t\t* Check if ports are busy\n\t\t* @returns {boolean}git\n\t\t*/\n\t\t_portsIdle(ports) {\n\t\t\tlet allAreIdle = true;\n\t\t\tports.forEach( (port) => {\n\t\t\t\tif (this.ports[port].busy) {\n\t\t\t\t\tallAreIdle = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn allAreIdle;\n\t\t}\n\n\t\t/**\n\t\t* Set all ports to busy\n\t\t* @returns {undefined}\n\t\t*/\n\t\t_setPortsBusy(ports, status) {\n\t\t\tports.forEach( (port) => {\n\t\t\t\tthis.ports[port].busy = status;\n\t\t\t});\n\t\t};\n\n\t}\n\n\treturn SBrick;\n\n})();\n","import React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport { SBrick } from './sbrick.js';\n//const SBrick = require('sbrick-protocol');\n\n//let SBRICK2 = new SBrick('SBrick');\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value1: 0,\n      value2: 0\n    };\n    this.SBRICK2 = new SBrick('SBrick');\n  }\n\n  componentDidMount() {\n    console.log('mount')\n  }\n\n  connectBt= () => {\n    const ID_SBRICK                             = \"SBrick\";\n    const FIRMWARE_COMPATIBILITY                 = 4.17;\n\n    const UUID_SERVICE_DEVICEINFORMATION        = \"device_information\";\n    const UUID_CHARACTERISTIC_MODELNUMBER       = \"model_number_string\";\n    const UUID_CHARACTERISTIC_FIRMWAREREVISION  = \"firmware_revision_string\";\n    const UUID_CHARACTERISTIC_HARDWAREREVISION  = \"hardware_revision_string\";\n    const UUID_CHARACTERISTIC_SOFTWAREREVISION  = \"software_revision_string\";\n    const UUID_CHARACTERISTIC_MANUFACTURERNAME  = \"manufacturer_name_string\";\n\n    const UUID_SERVICE_REMOTECONTROL            = \"4dc591b0-857c-41de-b5f1-15abda665b0c\";\n    const UUID_CHARACTERISTIC_REMOTECONTROL     = \"02b8cbcc-0e25-4bda-8790-a15f53e6010f\";\n    const UUID_CHARACTERISTIC_QUICKDRIVE        = \"489a6ae0-c1ab-4c9c-bdb2-11d373c1b7fb\";\n\n    const services = {\n      [UUID_SERVICE_DEVICEINFORMATION] : {\n        name : \"Device Information\",\n        characteristics : {\n          [UUID_CHARACTERISTIC_MODELNUMBER] : {\n            name : \"Model Number String\"\n          },\n          [UUID_CHARACTERISTIC_FIRMWAREREVISION] : {\n            name : \"Firmware Revision String\"\n          },\n          [UUID_CHARACTERISTIC_HARDWAREREVISION] : {\n            name : \"Hardware Revision String\"\n          },\n          [UUID_CHARACTERISTIC_SOFTWAREREVISION] : {\n            name : \"Software Revision String\"\n          },\n          [UUID_CHARACTERISTIC_MANUFACTURERNAME] : {\n            name : \"Manufacturer Name String\"\n          }\n        }\n      },\n      [UUID_SERVICE_REMOTECONTROL] : {\n        name : \"Remote Control\",\n        characteristics : {\n          [UUID_CHARACTERISTIC_REMOTECONTROL] : {\n            name : \"Quick Drive\"\n          },\n          [UUID_CHARACTERISTIC_QUICKDRIVE] : {\n            name : \"Remote Control\"\n          }\n        }\n      }\n    }\n\n  \tconst CMD_DRIVE     = 0x01; // Drive command\n    const PORTS = [\n      { portId: 0x00, channelsId: [ 0x00, 0x01 ]},\n      { portId: 0x01, channelsId: [ 0x02, 0x03 ]},\n      { portId: 0x02, channelsId: [ 0x04, 0x05 ]},\n      { portId: 0x03, channelsId: [ 0x06, 0x07 ]}\n    ];\n    // Direction\n    const CLOCKWISE        = 0x00; // Clockwise\n    const COUNTERCLOCKWISE = 0x01; // Counterclockwise\n\n    let options = {};\n      options.acceptAllDevices = true;\n      options.optionalServices = ['4dc591b0-857c-41de-b5f1-15abda665b0c']\n\n    console.log('Requesting Bluetooth Device...');\n    //console.log('with ' + JSON.stringify(options));\n    navigator.bluetooth.requestDevice(options, services\n      // {\n      //   filters: [{\n      //     services: ['device_information']\n      //   }]\n      // }\n    )\n        .then(device => {\n          console.log('id:' ,device.id, 'name:', device.name)\n          return device.gatt.connect();\n        })\n        .then(server => {\n          console.log('getting services', server)\n          return server.getPrimaryService('4dc591b0-857c-41de-b5f1-15abda665b0c')\n        })\n        .then(services => {\n          console.log(services)\n          return services.getCharacteristics()\n        }).then(ch => {\n          console.log(ch[0]);\n          //return ch.writeValue()\n        })\n  }\n\n  disconnectBt= (SBRICK1) => {\n    // let options = {};\n    // options.acceptAllDevices = true;\n    //\n    // console.log('Requesting Bluetooth Device...');\n    // console.log('with ' + JSON.stringify(options));\n    // navigator.bluetooth.requestDevice(options)\n    //   .then(device => {\n    //     device.gatt.connect().then((aa) => console.log('connectedd', aa))\n    //\n    //     console.log('> Name:             ' + device.name);\n    //     console.log('> Id:               ' + device.id);\n    //     //console.log('> Connected:        ' + device.gatt.connected);\n    //   })\n    this.SBRICK2.disconnect();\n  }\n\n  getCharacteristic2 = () => {\n    this.SBRICK2.connect().then(() => console.log('connect'))\n\n  }\n\n  start1 = (val) => {\n    this.SBRICK2.drive( 0x00, this.SBRICK2.CW, val )\n  }\n  start2 = (val) => {\n    this.SBRICK2.drive( 0x00, this.SBRICK2.CW, val )\n  }\n  start3 = (val ) => {\n    this.SBRICK2.drive( 0x00, this.SBRICK2.CW, val )\n  }\n\n  stop = () => {\n    this.SBRICK2.drive( 0x00, this.SBRICK2.CW, 0 )\n  }\n\n  fs = () => {\n    this.openFullscreen()\n  }\n\n  robo = () => {\n    this.SBRICK2.drive( 0x01, this.SBRICK2.CW, 255)\n    .then(this.delayPromise(1000))\n    .then(() => {\n      this.SBRICK2.drive( 0x00, this.SBRICK2.CW, 255)\n      this.SBRICK2.drive( 0x01, this.SBRICK2.CW, 0)\n      this.SBRICK2.drive( 0x03, this.SBRICK2.CCW, 255)\n    })\n    .then(this.delayPromise(1000))\n    .then(() => {\n      this.SBRICK2.drive( 0x00, this.SBRICK2.CW, 0)\n      this.SBRICK2.drive( 0x01, this.SBRICK2.CW, 255)\n      this.SBRICK2.drive( 0x03, this.SBRICK2.CCW, 0)\n    })\n    .then(this.delayPromise(1000))\n    .then(() => {\n      this.SBRICK2.drive( 0x00, this.SBRICK2.CW, 255)\n      this.SBRICK2.drive( 0x01, this.SBRICK2.CW, 0)\n      this.SBRICK2.drive( 0x03, this.SBRICK2.CCW, 255)\n    })\n    .then(this.delayPromise(1000))\n    .then(() => {\n      this.SBRICK2.drive( 0x00, this.SBRICK2.CW, 0)\n      this.SBRICK2.drive( 0x01, this.SBRICK2.CW, 255)\n      this.SBRICK2.drive( 0x03, this.SBRICK2.CCW, 0)\n    })\n    .then(this.delayPromise(1000))\n    .then(() => {\n      this.SBRICK2.drive( 0x01, this.SBRICK2.CW, 0)\n      this.SBRICK2.drive( 0x03, this.SBRICK2.CCW, 0)\n    })\n  }\n  // delayPromise(duration) {\n  //   return function(...args){\n  //     return new Promise(function(resolve, reject){\n  //       setTimeout(function(){\n  //         resolve(...args);\n  //       }, duration)\n  //     });\n  //   };\n  // }\n\n  delayPromise = (time) => (result) => new Promise(resolve => setTimeout(() => resolve(result), time));\n\nopenFullscreen() {\n  var elem = document.documentElement;\n  if (elem.requestFullscreen) {\n    elem.requestFullscreen();\n  } else if (elem.mozRequestFullScreen) { /* Firefox */\n    elem.mozRequestFullScreen();\n  } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari and Opera */\n    elem.webkitRequestFullscreen();\n  } else if (elem.msRequestFullscreen) { /* IE/Edge */\n    elem.msRequestFullscreen();\n  }\n}\n\ncloseFullscreen() {\n  if (document.exitFullscreen) {\n    document.exitFullscreen();\n  } else if (document.mozCancelFullScreen) { /* Firefox */\n    document.mozCancelFullScreen();\n  } else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */\n    document.webkitExitFullscreen();\n  } else if (document.msExitFullscreen) { /* IE/Edge */\n    document.msExitFullscreen();\n  }\n}\n\n  handleOnChange = (e) => {\n    //console.log(e.target.value)\n    this.setState({value1: e.target.value})\n    console.log(e.target.value)\n    let direction = e.target.value < 0 ? this.SBRICK2.CCW : this.SBRICK2.CW\n    this.SBRICK2.drive( 0x01, direction, e.target.value )\n  }\n  handleOnChangeS1 = (e) => {\n    //console.log(e.target.value)\n    this.setState({value2: e.target.value})\n    console.log(e.target.value)\n    let direction = e.target.value < 0 ? this.SBRICK2.CW : this.SBRICK2.CCW\n    this.SBRICK2.drive( 0x03, direction, e.target.value )\n  }\n  handleOnChange2 = (e) => {\n    //console.log(e.target.value)\n    this.SBRICK2.drive( 0x03, this.SBRICK2.CW, e.target.value )\n  }\n\n  setSbrick1 = (val) => {\n    //console.log(e.target.value)\n    //this.setState({value: e.target.value})\n    this.SBRICK2.drive( 0x01, this.SBRICK2.CW, val )\n  }\n\n  setSbrick2 = (val) => {\n    //console.log(e.target.value)\n    //this.setState({value: e.target.value})\n    this.SBRICK2.drive( 0x03, this.SBRICK2.CW, val )\n  }\n\n  render() {\n    console.log('render')\n    //let SBRICK1 = new SBrick(); // create a new SBrick object\n  //  let SBRICK2 = new SBrick('SBrick'); // create a new SBrick object\n\n  const inputStyle = {\n\n    transformOorigin: \"75px 75px\",\n    transform: \"rotate(-90deg)\",\n    boxShadow: \"inset 0px 1px 3px rgba(0, 0, 0, 0.3)\",\n    height: \"20px !important\",\n    width: \"200px\"\n  }\n\n    return (\n      <div className=\"App\">\n        <div style={{margin: \"0 0 100px 0 \"}}>\n          <p>LEGO CONTROLLER</p>\n          {/*<button onClick={() => this.start1(20)}>start50</button>*/}\n          {/*<button onClick={() => this.start2(100)}>start100</button>*/}\n          <button onClick={() => this.getCharacteristic2()}>connect Sbrick</button>\n          <button onClick={() => this.start3(255)}>lights on</button>\n          <button onClick={() => this.stop()}>lights off</button>\n          <button onClick={() => this.robo()}>commands</button>\n          <button onClick={() => this.fs()}>full screen</button>\n          <button onClick={() => this.closeFullscreen()}>close full screen</button>\n        </div>\n        <div style={{display: 'flex', justifyContent: \"space-between\", width: \"100%\"}}>\n          <div style={{width: '30%'}}>\n          <input style={inputStyle}\n                 name='SBrick2'\n                 type='range'\n                 min=\"-255\"\n                 max=\"255\"\n                 value={this.state.value2}\n                 onChange={this.handleOnChangeS1}\n            //onTouchStart={() => this.setState({value: 0})}\n                 onTouchEnd={() => {\n                   this.setSbrick2(0);\n                   this.setState({value2: 0});\n                 }}\n                 onMouseUp={() => {\n                   this.setSbrick2(0);\n                   this.setState({value2: 0});\n                 }}\n            //onMouseDown={() => this.setState({value: 0})}\n          />\n          </div>\n          <div style={{width: '30%'}}>\n          <input style={inputStyle}\n                 name='SBrick'\n                 type='range'\n                 min=\"-255\"\n                 max=\"255\"\n                 value={this.state.value1}\n                 onChange={this.handleOnChange}\n            //onTouchStart={() => this.setState({value: 0})}\n                 onTouchEnd={() => {\n                   this.setSbrick1(0);\n                   this.setState({value1: 0});\n                 }}\n                 onMouseUp={() => {\n                   this.setSbrick1(0);\n                   this.setState({value1: 0});\n                 }}\n            //onMouseDown={() => this.setState({value: 0})}\n          />\n          </div>\n          {/*<input name=\"Sbrick2\"*/}\n            {/*type=\"number\"*/}\n            {/*onChange={this.handleOnChange2}*/}\n          {/*/>*/}\n          {/*<p>{this.state.value}</p>*/}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n//\n//pionowe\n// .slider-wrapper {\n//   display: inline-block;\n//   width: 20px;\n//   height: 150px;\n//   padding: 0;\n// }\n// Then comes the style information for the <input> element within the reserved space:\n// .slider-wrapper input {\n//   width: 150px;\n//   height: 20px;\n//   margin: 0;\n//   transform-origin: 75px 75px;\n//   transform: rotate(-90deg);\n// }\n/*\n * Copyright (c) 2016-17 Francesco Marino\n *\n * @author Francesco Marino <francesco@360fun.net>\n * @website www.360fun.net\n *\n * This is just a basic Class to start playing with the new Web Bluetooth API,\n * specifications can change at any time so keep in mind that all of this is\n * mostly experimental! ;)\n *\n * Check your browser and platform implementation status first\n * https://github.com/WebBluetoothCG/web-bluetooth/blob/gh-pages/implementation-status.md\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n//\n// let WebBluetooth = (function() {\n//   'use strict';\n//\n//   // UTF-8\n//   let encoder = new TextEncoder('utf-8');\n//   let decoder = new TextDecoder('utf-8');\n//\n//   class WebBluetooth {\n//\n//     constructor() {\n//       this.device           = null;\n//       this.server           = null;\n//       this._characteristics = new Map();\n//       this._debug           = false;\n//     }\n//\n//     isConnected() {\n//       return this.device && this.device.gatt.connected;\n//     }\n//\n//     connect(options,services) {\n//       return navigator.bluetooth.requestDevice(options)\n//         .then(device => {\n//           this.device = device;\n//           this._log('Connected to device named \"' + device.name + '\" with ID \"' + device.id + '\"');\n//           return device.gatt.connect();\n//         })\n//         .then(server => {\n//           this.server = server;\n//           return Promise.all(\n//             Object.keys(services).map( serviceId => {\n//               return server.getPrimaryService(serviceId).then(service => {\n//                 return Promise.all(\n//                   Object.keys(services[serviceId].characteristics).map( characteristicId => {\n//                     return this._cacheCharacteristic(service, characteristicId)\n//                       .then( () => {\n//                         this._log('Found characteristic \"' + characteristicId + '\"');\n//                       })\n//                       .catch( e => { this._error('Characteristic \"' + characteristicId + '\" NOT found') } );\n//                   })\n//                 );\n//               })\n//                 .then( () => {\n//                   this._log('Found service \"' + serviceId + '\"');\n//                 })\n//                 .catch( e => { this._error('Service \"' + serviceId + '\"') } );\n//             })\n//           );\n//         });\n//     }\n//\n//     disconnect() {\n//       return new Promise( (resolve, reject) =>  {\n//           if( this.isConnected() ) {\n//             resolve();\n//           } else {\n//             reject('Device not connected');\n//           }\n//         }\n//       ).then( ()=> {\n//         this._log('Device disconnected')\n//         return this.device.gatt.disconnect();\n//       }).catch( e => { this._error(e) } );\n//     }\n//\n//     readCharacteristicValue(characteristicUuid) {\n//       return new Promise( (resolve, reject) =>  {\n//           if( this.isConnected() ) {\n//             resolve();\n//           } else {\n//             reject('Device not connected');\n//           }\n//         }\n//       ).then( ()=> {\n//         let characteristic = this._characteristics.get(characteristicUuid);\n//         return characteristic.readValue()\n//           .then(value => {\n//             // In Chrome 50+, a DataView is returned instead of an ArrayBuffer.\n//             value = value.buffer ? value : new DataView(value);\n//             this._log('READ', characteristic.uuid, value);\n//             return value;\n//           });\n//       })\n//         .catch( e => { this._error(e) } );\n//     }\n//\n//     writeCharacteristicValue(characteristicUuid, value) {\n//       return new Promise( (resolve, reject) =>  {\n//           if( this.isConnected() ) {\n//             resolve();\n//           } else {\n//             reject('Device not connected');\n//           }\n//         }\n//       ).then( ()=> {\n//         let characteristic = this._characteristics.get(characteristicUuid);\n//         this._log('WRITE', characteristic.uuid, value);\n//         return characteristic.writeValue(value);\n//       }).catch( e => { this._error(e) } );\n//     }\n//\n//     _error(msg) {\n//       if(this._debug) {\n//         console.debug(msg);\n//       } else {\n//         throw msg;\n//       }\n//     }\n//\n//     _log(msg) {\n//       if(this._debug) {\n//         console.log(msg);\n//       }\n//     }\n//\n//     _cacheCharacteristic(service, characteristicUuid) {\n//       return service.getCharacteristic(characteristicUuid)\n//         .then(characteristic => {\n//           this._characteristics.set(characteristicUuid, characteristic);\n//         });\n//     }\n//\n//     _decodeString(data) {\n//       return decoder.decode(data);\n//     }\n//     _encodeString(data) {\n//       return encoder.encode(data);\n//     }\n//   }\n//\n//   return WebBluetooth;\n//\n// })();\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}